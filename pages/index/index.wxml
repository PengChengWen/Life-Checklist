<!--pages/index/index.wxml-->
<view class="container">
  <!-- å¤´éƒ¨ç»Ÿè®¡ -->
  <view class="header-stats">
    <view class="stat-item">
      <view class="stat-number">{{totalCount}}</view>
      <view class="stat-label">æ€»æ„¿æœ›</view>
    </view>
    <view class="stat-item">
      <view class="stat-number completed">{{completedCount}}</view>
      <view class="stat-label">å·²å®Œæˆ</view>
    </view>
    <view class="stat-item">
      <view class="stat-number pending">{{pendingCount}}</view>
      <view class="stat-label">æœªå®Œæˆ</view>
    </view>
  </view>

  <!-- ç­›é€‰æ ‡ç­¾ -->
  <view class="filter-tabs">
    <view 
      class="filter-tab {{filterStatus == -1 ? 'active' : ''}}"
      data-status="-1"
      bindtap="onFilterChange"
    >
      å…¨éƒ¨
    </view>
    <view 
      class="filter-tab {{filterStatus == 0 ? 'active' : ''}}"
      data-status="0"
      bindtap="onFilterChange"
    >
      æœªå®Œæˆ
    </view>
    <view 
      class="filter-tab {{filterStatus == 1 ? 'active' : ''}}"
      data-status="1"
      bindtap="onFilterChange"
    >
      å·²å®Œæˆ
    </view>
  </view>

  <!-- æ¸…å•åˆ—è¡¨ -->
  <view class="checklist-container">
    <block wx:for="{{checklist}}" wx:key="id">
      <view class="checklist-item {{item.status == 1 ? 'completed' : ''}}">
        <view class="item-content">
          <view class="item-header">
            <view class="item-title">{{item.title}}</view>
            <view class="priority-badge priority-{{item.priority}}">
              <text wx:if="{{item.priority == 0}}">ä½</text>
              <text wx:elif="{{item.priority == 1}}">ä¸­</text>
              <text wx:else>é«˜</text>
            </view>
          </view>
          <view class="item-description">{{item.description}}</view>
          <view class="item-footer">
            <view class="item-time">{{item.createTimeStr}}</view>
            <view class="item-actions">
              <view 
                class="action-btn {{item.status == 1 ? 'btn-completed' : 'btn-complete'}}"
                data-id="{{item.id}}"
                bindtap="toggleStatus"
              >
                <text wx:if="{{item.status == 1}}">âœ“ å·²å®Œæˆ</text>
                <text wx:else>æ ‡è®°å®Œæˆ</text>
              </view>
              <view 
                class="action-btn btn-delete"
                data-id="{{item.id}}"
                bindtap="deleteItem"
              >
                åˆ é™¤
              </view>
            </view>
          </view>
        </view>
        <view 
          class="status-checkbox {{item.status == 1 ? 'checked' : ''}}"
          data-id="{{item.id}}"
          bindtap="toggleStatus"
        >
          <text wx:if="{{item.status == 1}}">âœ“</text>
        </view>
      </view>
    </block>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{empty}}">
      <view class="empty-icon">ğŸ“</view>
      <view class="empty-text">è¿˜æ²¡æœ‰æ„¿æœ›å“¦~</view>
      <view class="empty-hint">ç‚¹å‡»ä¸‹æ–¹"æ·»åŠ æ„¿æœ›"å¼€å§‹è®°å½•å§</view>
    </view>
  </view>

  <!-- æµ®åŠ¨æ·»åŠ æŒ‰é’® -->
  <view class="fab" bindtap="goToAdd">
    <text class="fab-icon">+</text>
  </view>
</view>

